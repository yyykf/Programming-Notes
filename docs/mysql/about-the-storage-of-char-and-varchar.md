---
title: 关于CHAR和VARCHAR的存储
isOriginal: true
---
根据 MySQL 官方文档，`CHAR` 类型和 `VARCHAR` 主要是在存储和查询的时候有所区别，以及在列的最大长度和是否保留尾随空格「trailing spaces」也有些不一样。

对于 `CHAR(N)` 而言，N 的范围为 `[0, 255]`，其列值的长度在定义表时就是确定的了。当保存一个 `CHAR(N)` 列值时，如果列值的长度不足 `N`，那么就需要在尾部填充空格「right-padded with spaces」，使其达到长度 `N`。同时，这些尾随空格在查询的时候又会自动被移除。

> 如果想在查询的时候保存尾随空格，那么可以通过配置 `sql_mode=‘PAD_CHAR_TO_FULL_LENGTH’`，具体参见 [PAD_CHAR_TO_FULL_LENGTH](https://dev.mysql.com/doc/refman/5.7/en/sql-mode.html#sqlmode_pad_char_to_full_length)。

对于 `VARCHAR(N)` 而言，N 的范围为 `[0, 65535]`，实际上这个范围是和最大行长度「maximum row size，65535 bytes」以及列所使用的字符集有关系的，N 的取值并无法达到 65535。对于非 NULL 的 `VARCHAR` 列值，需要通过一个额外的变长字段来保存其长度，最多需要 2 字节，具体大小取决于该 `VARCHAR` 字段的最大字节数以及实际占用字节数。

当保存一个 `VARCHAR(N)` 的列值时，如果列值长度超过了 N，那么根据配置的 `SQL MODE`，在插入前超过 N 的部分会被删除并生成一个警告，也可能直接插入失败并生成一个错误。

一言以蔽之，对于 `CHAR` 列，长度不足 N 时会通过填充空格来达到指定长度，而查询的时候，如果含有尾随空格，不管是不是填充的，都会被移除掉。对于 `VARCHAR` 列，除非列值超过指定长度才会截取，否则在存储和查询时不做任何处理。 如果是 NULL 值，那么不管是 `CHAR` 列还是 `VARCHAR` 列，都不需要存储实际数据。

| ''         | CHAR(4) | Storage Required | VARCHAR(4) | Storage Required |
| ---------- | ------- | ---------------- | ---------- | ---------------- |
| ''         | '    '  | 4 bytes          | ''         | 1 byte           |
| 'ab'       | 'ab  '  | 4 bytes          | 'ab'       | 3 bytes          |
| 'abcd'     | 'abcd'  | 4 bytes          | 'abcd'     | 5 bytes          |
| 'abcdefgh' | 'abcd'  | 4 bytes          | 'abcd'     | 5 bytes          |
| NULL       | NULL    | 0 bytes          | NULL       | 0 bytes          |

还有一点需要强调的是，虽然尾随空格看起来对用户是透明的，但是在对于 `LIKE` 操作符来说，查询条件中的尾随空格是不会被移除的，具体可以看本文的最后一个实验。

### 实验验证

先给出表定义，字符集使用单字节的 `ascii`，行格式使用 `compact`。

```sql
CREATE TABLE vc (
	v VARCHAR ( 4 ),
  c CHAR ( 4 )
) ENGINE = INNODB DEFAULT CHARSET = ascii ROW_FORMAT = COMPACT
```

------

#### Case 1 - 两个字段都插入没有尾随空格的 `ab`

```sql
INSERT INTO vc VALUES ('ab', 'ab');
```

此时使用 `hexdump`查看对应的表空间，如下所示。

```cpp
00000000  7a 6f b1 e8 00 00 00 00  00 00 00 00 00 00 00 00  |zo..............|
00000010  00 00 00 00 25 0d 23 1f  00 08 00 00 00 00 00 00  |....%.#.........|
00000020  00 00 00 00 11 43 00 00  11 43 00 00 00 00 00 00  |.....C...C......|
00000030  00 06 00 00 00 40 00 00  00 00 00 00 00 04 00 00  |.....@..........|
00000040  00 00 ff ff ff ff 00 00  ff ff ff ff 00 00 00 00  |................|
00000050  00 01 00 00 00 00 00 9e  00 00 00 00 00 9e 00 00  |................|
00000060  00 00 ff ff ff ff 00 00  ff ff ff ff 00 00 00 00  |................|
00000070  00 00 00 00 00 03 00 00  00 00 ff ff ff ff 00 00  |................|
00000080  ff ff ff ff 00 00 00 00  00 01 00 00 00 02 00 26  |...............&|
00000090  00 00 00 02 00 26 00 00  00 00 00 00 00 00 ff ff  |.....&..........|
000000a0  ff ff 00 00 ff ff ff ff  00 00 00 00 00 02 aa ff  |................|
000000b0  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff 00 00  |................|
000000c0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
00003ff0  00 00 00 00 00 00 00 00  7a 6f b1 e8 25 0d 23 1f  |........zo..%.#.|
00004000  73 58 8d 5a 00 00 00 01  00 00 00 00 00 00 00 00  |sX.Z............|
00004010  00 00 00 00 25 0d 13 22  00 05 00 00 00 00 00 00  |....%.."........|
00004020  00 00 00 00 11 43 00 00  00 00 00 00 00 00 00 00  |.....C..........|
00004030  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
00007ff0  00 00 00 00 00 00 00 00  73 58 8d 5a 25 0d 13 22  |........sX.Z%.."|
00008000  96 48 10 09 00 00 00 02  00 00 00 00 00 00 00 00  |.H..............|
00008010  00 00 00 00 25 0d 23 1f  00 03 00 00 00 00 00 00  |....%.#.........|
00008020  00 00 00 00 11 43 ff ff  ff ff 00 00 ff ff ff ff  |.....C..........|
00008030  00 00 00 00 00 00 00 00  00 01 00 00 00 00 00 00  |................|
00008040  00 00 ff ff ff ff 00 00  ff ff ff ff 00 00 00 00  |................|
*
00008060  00 00 ff ff ff ff 00 00  ff ff ff ff 00 00 05 d6  |................|
00008070  69 d2 00 00 00 03 ff ff  ff ff ff ff ff ff ff ff  |i...............|
00008080  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  |................|
*
000080f0  ff ff 00 00 00 00 00 00  00 02 00 00 00 00 00 00  |................|
00008100  00 00 ff ff ff ff 00 00  ff ff ff ff 00 00 00 00  |................|
*
00008120  00 00 ff ff ff ff 00 00  ff ff ff ff 00 00 05 d6  |................|
00008130  69 d2 ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  |i...............|
00008140  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  |................|
*
000081b0  ff ff 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
000081c0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
0000bff0  00 00 00 00 00 00 00 00  96 48 10 09 25 0d 23 1f  |.........H..%.#.|
0000c000  83 b9 d5 56 00 00 00 03  ff ff ff ff ff ff ff ff  |...V............|
0000c010  00 00 00 00 25 0d 3f 04  45 bf 00 00 00 00 00 00  |....%.?.E.......|
0000c020  00 00 00 00 11 43 00 02  00 98 80 03 00 00 00 00  |.....C..........|
0000c030  00 7f 00 05 00 00 00 01  00 00 00 00 00 00 00 00  |................|
0000c040  00 00 00 00 00 00 00 00  02 ea 00 00 11 43 00 00  |.............C..|
0000c050  00 02 00 f2 00 00 11 43  00 00 00 02 00 32 01 00  |.......C.....2..|
0000c060  02 00 1c 69 6e 66 69 6d  75 6d 00 02 00 0b 00 00  |...infimum......|
0000c070  73 75 70 72 65 6d 75 6d  02 00 00 00 10 ff f1 00  |supremum........|
0000c080  00 00 00 04 05 00 00 00  30 ee 2c c0 00 00 02 02  |........0.,.....|
0000c090  01 10 61 62 61 62 20 20  00 00 00 00 00 00 00 00  |..abab  ........|
0000c0a0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
0000fff0  00 00 00 00 00 70 00 63  83 b9 d5 56 25 0d 3f 04  |.....p.c...V%.?.|
00010000  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
00018000
```

重点看 `0x0000c078 - 0x0000c097` 这 32 个字节的内容。

![INSERT INTO vc VALUES ('ab', 'ab');](../imgs/ibd_dump.png)

根据 `Compact` 行格式的组成，我们可以确定：

- `0x0000c078` 地址的内容为 `02`，这个是「非 NULL 变长字段列表」，对应的就是 `v` 列的长度，即为 2 字节，符合记录中的 `ab`。
- `0x0000c079` 地址的内容为 `00`，这个是「NULL值列表」，代表此时 `v` 列和 `c` 列都不为 NULL。
- `0x0000c07a - 0x0000c07e` 地址的内容为 `00 00 10 ff f1`，这个是记录头信息，长度为 5 字节。
- `0x0000c07f - 0x0000c084` 地址的内容为 `00 00 00 00 04 05`，这个是自动生成的主键 `DB_ROW_ID`，长度为 6 字节。
- `0x0000c085 - 0x0000c08a` 地址的内容为 `00 00 00  30 ee 2c`，这个是事务ID `DB_TRX_ID`，长度为 6 字节。
- `0x0000c08b - 0x0000c091` 地址的内容为 `c0 00 00 02 02 01 10`，这个是回滚指针 `DB_ROLL_PTR`，长度为 7 字节。
- `0x0000c092 - 0x0000c07` 地址的内容为 `61 62 61 62 20 20`，这个就是具体的记录数据了，根据对应的 `ascii` 码很容易就能解码出对应的 `ab` 以及 `ab  `。

可以看到，为了使 `CHAR` 列的长度能达到建表时指定的长度 4，对其增加了 2 字节的尾随空格，即 `20 20`。

如果此时表的字符集为变长字符集，例如「utfmb3」，那么「变长字段列表中」也会包含 `c` 列的长度。

最后验证一下查询的时候，`CHAR`列尾随空格的处理。从结果可以看到，尾随空格在查询的时候会被移除掉。

```sql
SELECT CONCAT('(',v,')'), CONCAT('(',c,')') FROM vc;

+---------------------+---------------------+
| CONCAT('(', v, ')') | CONCAT('(', c, ')') |
+---------------------+---------------------+
| (ab)                | (ab)                |
+---------------------+---------------------+
```

------

#### Case 2 - 两个字段都插入有尾随空格的 `ab  `

```sql
INSERT INTO vc VALUES ('ab  ', 'ab  ');
```

使用 `hexdump` 查看表空间。

```cpp
00000000  7a 6f b1 e8 00 00 00 00  00 00 00 00 00 00 00 00  |zo..............|
00000010  00 00 00 00 25 0d 23 1f  00 08 00 00 00 00 00 00  |....%.#.........|
00000020  00 00 00 00 11 43 00 00  11 43 00 00 00 00 00 00  |.....C...C......|
00000030  00 06 00 00 00 40 00 00  00 00 00 00 00 04 00 00  |.....@..........|
00000040  00 00 ff ff ff ff 00 00  ff ff ff ff 00 00 00 00  |................|
00000050  00 01 00 00 00 00 00 9e  00 00 00 00 00 9e 00 00  |................|
00000060  00 00 ff ff ff ff 00 00  ff ff ff ff 00 00 00 00  |................|
00000070  00 00 00 00 00 03 00 00  00 00 ff ff ff ff 00 00  |................|
00000080  ff ff ff ff 00 00 00 00  00 01 00 00 00 02 00 26  |...............&|
00000090  00 00 00 02 00 26 00 00  00 00 00 00 00 00 ff ff  |.....&..........|
000000a0  ff ff 00 00 ff ff ff ff  00 00 00 00 00 02 aa ff  |................|
000000b0  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff 00 00  |................|
000000c0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
00003ff0  00 00 00 00 00 00 00 00  7a 6f b1 e8 25 0d 23 1f  |........zo..%.#.|
00004000  73 58 8d 5a 00 00 00 01  00 00 00 00 00 00 00 00  |sX.Z............|
00004010  00 00 00 00 25 0d 13 22  00 05 00 00 00 00 00 00  |....%.."........|
00004020  00 00 00 00 11 43 00 00  00 00 00 00 00 00 00 00  |.....C..........|
00004030  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
00007ff0  00 00 00 00 00 00 00 00  73 58 8d 5a 25 0d 13 22  |........sX.Z%.."|
00008000  96 48 10 09 00 00 00 02  00 00 00 00 00 00 00 00  |.H..............|
00008010  00 00 00 00 25 0d 23 1f  00 03 00 00 00 00 00 00  |....%.#.........|
00008020  00 00 00 00 11 43 ff ff  ff ff 00 00 ff ff ff ff  |.....C..........|
00008030  00 00 00 00 00 00 00 00  00 01 00 00 00 00 00 00  |................|
00008040  00 00 ff ff ff ff 00 00  ff ff ff ff 00 00 00 00  |................|
*
00008060  00 00 ff ff ff ff 00 00  ff ff ff ff 00 00 05 d6  |................|
00008070  69 d2 00 00 00 03 ff ff  ff ff ff ff ff ff ff ff  |i...............|
00008080  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  |................|
*
000080f0  ff ff 00 00 00 00 00 00  00 02 00 00 00 00 00 00  |................|
00008100  00 00 ff ff ff ff 00 00  ff ff ff ff 00 00 00 00  |................|
*
00008120  00 00 ff ff ff ff 00 00  ff ff ff ff 00 00 05 d6  |................|
00008130  69 d2 ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  |i...............|
00008140  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  |................|
*
000081b0  ff ff 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
000081c0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
0000bff0  00 00 00 00 00 00 00 00  96 48 10 09 25 0d 23 1f  |.........H..%.#.|
0000c000  cd 24 ad 39 00 00 00 03  ff ff ff ff ff ff ff ff  |.$.9............|
0000c010  00 00 00 00 25 0d 40 77  45 bf 00 00 00 00 00 00  |....%.@wE.......|
0000c020  00 00 00 00 11 43 00 02  00 ba 80 04 00 00 00 00  |.....C..........|
0000c030  00 9f 00 02 00 01 00 02  00 00 00 00 00 00 00 00  |................|
0000c040  00 00 00 00 00 00 00 00  02 ea 00 00 11 43 00 00  |.............C..|
0000c050  00 02 00 f2 00 00 11 43  00 00 00 02 00 32 01 00  |.......C.....2..|
0000c060  02 00 1c 69 6e 66 69 6d  75 6d 00 03 00 0b 00 00  |...infimum......|
0000c070  73 75 70 72 65 6d 75 6d  02 00 00 00 10 00 20 00  |supremum...... .|
0000c080  00 00 00 04 05 00 00 00  30 ee 2c c0 00 00 02 02  |........0.,.....|
0000c090  01 10 61 62 61 62 20 20  04 00 00 00 18 ff d1 00  |..abab  ........|
0000c0a0  00 00 00 04 06 00 00 00  30 ee 2d a1 00 00 02 03  |........0.-.....|
0000c0b0  01 10 61 62 20 20 61 62  20 20 00 00 00 00 00 00  |..ab  ab  ......|
0000c0c0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
0000fff0  00 00 00 00 00 70 00 63  cd 24 ad 39 25 0d 40 77  |.....p.c.$.9%.@w|
00010000  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
00018000
```

新纪录的位置位于 `0x0000c098 - 0x0000c0b9`，具体组成就不分析了，只看数据部分，即 `0x0000c0b2 - 0x0000c0b9`，对应的内容为 `ab  ab  `，符合插入的数据。

这里有一点的要注意的是，虽然 `CHAR` 列在保存的时候，尾随空格并不是填充的，而是用户输入的，但是在查询的时候，不管是否为手动输入，尾随的空格都会被移除。

```sql
SELECT CONCAT('(',v,')'), CONCAT('(',c,')') FROM vc;

+---------------------+---------------------+
| CONCAT('(', v, ')') | CONCAT('(', c, ')') |
+---------------------+---------------------+
| (ab  )              | (ab)                |
+---------------------+---------------------+
```

#### Case 3 - 两个字段都插入 NULL 值

```sql
INSERT INTO vc VALUES(NULL, NULL);
```

查看表空间如下。

```cpp
00000000  7a 6f b1 e8 00 00 00 00  00 00 00 00 00 00 00 00  |zo..............|
00000010  00 00 00 00 25 0d 23 1f  00 08 00 00 00 00 00 00  |....%.#.........|
00000020  00 00 00 00 11 43 00 00  11 43 00 00 00 00 00 00  |.....C...C......|
00000030  00 06 00 00 00 40 00 00  00 00 00 00 00 04 00 00  |.....@..........|
00000040  00 00 ff ff ff ff 00 00  ff ff ff ff 00 00 00 00  |................|
00000050  00 01 00 00 00 00 00 9e  00 00 00 00 00 9e 00 00  |................|
00000060  00 00 ff ff ff ff 00 00  ff ff ff ff 00 00 00 00  |................|
00000070  00 00 00 00 00 03 00 00  00 00 ff ff ff ff 00 00  |................|
00000080  ff ff ff ff 00 00 00 00  00 01 00 00 00 02 00 26  |...............&|
00000090  00 00 00 02 00 26 00 00  00 00 00 00 00 00 ff ff  |.....&..........|
000000a0  ff ff 00 00 ff ff ff ff  00 00 00 00 00 02 aa ff  |................|
000000b0  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff 00 00  |................|
000000c0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
00003ff0  00 00 00 00 00 00 00 00  7a 6f b1 e8 25 0d 23 1f  |........zo..%.#.|
00004000  73 58 8d 5a 00 00 00 01  00 00 00 00 00 00 00 00  |sX.Z............|
00004010  00 00 00 00 25 0d 13 22  00 05 00 00 00 00 00 00  |....%.."........|
00004020  00 00 00 00 11 43 00 00  00 00 00 00 00 00 00 00  |.....C..........|
00004030  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
00007ff0  00 00 00 00 00 00 00 00  73 58 8d 5a 25 0d 13 22  |........sX.Z%.."|
00008000  96 48 10 09 00 00 00 02  00 00 00 00 00 00 00 00  |.H..............|
00008010  00 00 00 00 25 0d 23 1f  00 03 00 00 00 00 00 00  |....%.#.........|
00008020  00 00 00 00 11 43 ff ff  ff ff 00 00 ff ff ff ff  |.....C..........|
00008030  00 00 00 00 00 00 00 00  00 01 00 00 00 00 00 00  |................|
00008040  00 00 ff ff ff ff 00 00  ff ff ff ff 00 00 00 00  |................|
*
00008060  00 00 ff ff ff ff 00 00  ff ff ff ff 00 00 05 d6  |................|
00008070  69 d2 00 00 00 03 ff ff  ff ff ff ff ff ff ff ff  |i...............|
00008080  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  |................|
*
000080f0  ff ff 00 00 00 00 00 00  00 02 00 00 00 00 00 00  |................|
00008100  00 00 ff ff ff ff 00 00  ff ff ff ff 00 00 00 00  |................|
*
00008120  00 00 ff ff ff ff 00 00  ff ff ff ff 00 00 05 d6  |................|
00008130  69 d2 ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  |i...............|
00008140  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  |................|
*
000081b0  ff ff 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
000081c0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
0000bff0  00 00 00 00 00 00 00 00  96 48 10 09 25 0d 23 1f  |.........H..%.#.|
0000c000  06 de 6f c7 00 00 00 03  ff ff ff ff ff ff ff ff  |..o.............|
0000c010  00 00 00 00 25 0d 4b 79  45 bf 00 00 00 00 00 00  |....%.KyE.......|
0000c020  00 00 00 00 11 43 00 02  00 d3 80 05 00 00 00 00  |.....C..........|
0000c030  00 c0 00 02 00 02 00 03  00 00 00 00 00 00 00 00  |................|
0000c040  00 00 00 00 00 00 00 00  02 ea 00 00 11 43 00 00  |.............C..|
0000c050  00 02 00 f2 00 00 11 43  00 00 00 02 00 32 01 00  |.......C.....2..|
0000c060  02 00 1c 69 6e 66 69 6d  75 6d 00 04 00 0b 00 00  |...infimum......|
0000c070  73 75 70 72 65 6d 75 6d  02 00 00 00 10 00 20 00  |supremum...... .|
0000c080  00 00 00 04 05 00 00 00  30 ee 2c c0 00 00 02 02  |........0.,.....|
0000c090  01 10 61 62 61 62 20 20  04 00 00 00 18 00 21 00  |..abab  ......!.|
0000c0a0  00 00 00 04 06 00 00 00  30 ee 2d a1 00 00 02 03  |........0.-.....|
0000c0b0  01 10 61 62 20 20 61 62  20 20 03 00 00 20 ff b0  |..ab  ab  ... ..|
0000c0c0  00 00 00 00 04 07 00 00  00 30 ee 32 a4 00 00 01  |.........0.2....|
0000c0d0  ce 01 10 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
0000c0e0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
0000fff0  00 00 00 00 00 70 00 63  06 de 6f c7 25 0d 4b 79  |.....p.c..o.%.Ky|
00010000  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
00018000
```

新纪录的位置位于 `0x0000c0ba - 0x0000c0d2`，可以看到该记录只占用了 25 个字节，组成如下：

- `0x0000c0ba` 地址的内容为 `0x03` 即 `0b11`，这个是「NULL值列表」，代表此时 `v` 列和 `c` 列都为 NULL。
- `0x0000c0bb - 0x0000c0bf` 地址的内容为 `00 00 20 ff b0`，这个是记录头信息，长度为 5 字节。
- `0x0000c0c0 - 0x0000c0c5` 地址的内容为 `00 00 00 00 04 07`，这个是自动生成的主键 `DB_ROW_ID`，长度为 6 字节。
- `0x0000c0c6 - 0x0000c0cb` 地址的内容为 `00 00 00 30 ee 32`，这个是事务ID `DB_TRX_ID`，长度为 6 字节。
- `0x0000c0cc - 0x0000c0d2` 地址的内容为 `a4 00 00 01 ce 01 10`，这个是回滚指针 `DB_ROLL_PTR`，长度为 7 字节。

可以看到，因为该记录的两个列都是 「NULL」，所以保存的时候只记录了 「NULL值列表」，不需要保存相应的数据。

------

#### Case 4 - 查询时尾随空格的处理

基于上面的例子，首先看一下当前表中拥有的数据。

```sql
SELECT CONCAT('(',v,')'), CONCAT('(',c,')') FROM vc;

+---------------------+---------------------+
| CONCAT('(', v, ')') | CONCAT('(', c, ')') |
+---------------------+---------------------+
| (ab)                | (ab)                |
| (ab  )              | (ab)                |
| NULL                | NULL                |
+---------------------+---------------------+
```

上面提到过，对于查询条件中的尾随空格，除了 `LIKE` 操作符，其他的操作在执行的时是会移除移除尾部的，如下所示。

```sql
SELECT CONCAT('(',v,')'), CONCAT('(',c,')') FROM vc WHERE v = 'ab  ';
+---------------------+---------------------+
| CONCAT('(', v, ')') | CONCAT('(', c, ')') |
+---------------------+---------------------+
| (ab)                | (ab)                |
| (ab  )              | (ab)                |
+---------------------+---------------------+

SELECT CONCAT('(',v,')'), CONCAT('(',c,')') FROM vc WHERE c = 'ab  ';
+---------------------+---------------------+
| CONCAT('(', v, ')') | CONCAT('(', c, ')') |
+---------------------+---------------------+
| (ab)                | (ab)                |
| (ab  )              | (ab)                |
+---------------------+---------------------+

SELECT CONCAT('(',v,')'), CONCAT('(',c,')') FROM vc WHERE v LIKE 'ab  ';
+---------------------+---------------------+
| CONCAT('(', v, ')') | CONCAT('(', c, ')') |
+---------------------+---------------------+
| (ab  )              | (ab)                |
+---------------------+---------------------+

SELECT CONCAT('(',v,')'), CONCAT('(',c,')') FROM vc WHERE c LIKE 'ab  ';
+---------------------+---------------------+
| CONCAT('(', v, ')') | CONCAT('(', c, ')') |
+---------------------+---------------------+
|                     |                     |
+---------------------+---------------------+
```

> 有个疑问，为什么变长列 `v = 'ab  '` 可以查询出两条记录，不应该只是查询出第一条记录而已吗？

### 参考链接

- [11.3.2 The CHAR and VARCHAR Types](https://dev.mysql.com/doc/refman/5.7/en/char.html)
- [CHAR and VARCHAR Data Types in Different Database Engines](https://vertabelo.com/blog/comparing-char-and-varchar-data-types-in-different-database-engines/)